# ⚜️ Cognitive Self-Reflection Capability (The Mirror)

> **Version**: 1.0
> **Purpose**: Meta-cognition protocol for system self-optimization
> **Access**: `archaiforge reflect` or loaded via `capability:reflection`

---

## 1. The Philosophy of Mirrors

Archaiforge Intelligence is designed to be **self-correcting**. 
While the Heartbeat Daemon fixes *immediate* drift, the **Mirror** fixes *structural* drift.

**The Meta-Cognition Loop:**
1.  **ACT**: Perform work (CLEAR AI phases).
2.  **LOG**: Record outcomes in Vector Ledger.
3.  **ANALYZE** (Reflect): Look back at aggregate patterns.
4.  **OPTIMIZE**: Update `boot.md` or `state` to prevent recurrence.

---

## 2. Core Metrics

When you look in the mirror, what do you see?

### A. Return on Intelligence (ROI)
*Formula*: `(Human Baseline Hours) / (Archaiforge Actual Hours)`
- **> 10.0x**: **Systems Level Efficiency**. You are leveraging architecture effectively.
- **2.0x - 10.0x**: **Standard Agency**. Good operational execution.
- **< 2.0x**: **Cognitive Friction**. You are struggling. *Why?*

### B. Drift Velocity
*Formula*: `(Count of WARNING/CRITICAL Heartbeats) / (Total Sessions)`
- **High Drift**: Indieates you are getting "lost in thought" or ignoring the Time TRIAD.
- **Action**: Shorten batch sizes. Re-read `boot.md`.

### C. Context Thrashing
*Formula*: `(Unique Context Files Loaded) / (Task Duration)`
- **High Thrashing**: You don't know where to look. You are opening random files.
- **Action**: Pause. Use `archaiforge query` to find the *right* context first.

---

## 3. Reflection Heuristics

Ask these questions during a Reflection Session:

| Symptom | Diagnosis | Correction |
|---------|-----------|------------|
| "I had to ask the user 3 clarifying questions." | **Weak C-Phase** (Clarity) | Load `realm3x.md` earlier. Don't start until clear. |
| "I edited the same file 4 times in one session." | **Weak E-Phase** (Examples/Design) | Invoke CASCADE. Design the entity fully before writing code. |
| "The integration failed after implementation." | **Weak A-Phase** (Adaptation) | You ignored `architecture.md` constraints. Check boundaries first. |
| "The user had to correct my code style." | **Weak L-Phase** (Limits) | Read existing code patterns before writing new ones. |

---

## 4. Optimization Actions

When reflection reveals a flaw, **fix the system, not just the bug.**

1.  **Update `boundaries.yaml`**: Add a new constraint.
    *   *Example*: "Constraint: Always use `zod` for validation."
2.  **Update `cpt.md`**: Refine the product vision if you strayed.
3.  **Update `boot.md`**: (Requires User Approval) Change your own instructions.

> **"The unexamined agent is not worth running."**
